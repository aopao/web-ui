<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>web-ui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="../../layui/css/layui.css">
    <link rel="stylesheet" href="http://at.alicdn.com/t/font_711523_iugv28j5sa9.css">
    <link rel="stylesheet" href="../../assets/css/plugins/zTreeStyle.css">
    <link rel="stylesheet" href="../../assets/css/index.css">
    <link rel="stylesheet" href="../../assets/css/main.css">
</head>
<body>

<div class="layui-layout">
    <!--左侧树-->
    <div class="layui-tree-panel">
        <div id="treeDemo" class="ztree"></div>
    </div>
    <!--左侧树-->
    <!--分割线-->
    <div class="layui-tree-divider"></div>
    <!--右侧内容-->
    <div class="layui-content-panel">
        <div class="layui-list-container">
            <!--查询表单-->
            <div class="layui-form-panel">
                <div class="layui-form">
                    <div class="layui-form-item">
                        <label class="layui-form-label">姓名</label>
                        <div class="layui-input-inline">
                            <input type="text" name="title" lay-verify="title" autocomplete="off" placeholder="请输入" class="layui-input">
                        </div>
                        <label class="layui-form-label">性别</label>
                        <div class="layui-input-inline">
                            <select lay-verify="required">
                                <option value="">请选择</option>
                                <option value="1">男</option>
                                <option value="2">女</option>
                            </select>
                        </div>
                        <a class="layui-btn layui-btn-primary form-btn-query"><i class="iconfont icon-chaxun"></i><span>查询</span></a>
                        <a class="layui-btn layui-btn-primary form-btn-reset"><i class="iconfont icon-zhongzhi"></i><span>重置</span></a>
                        <a class="layui-btn layui-btn-primary form-btn-query-more"><i class="iconfont icon-chaxun"></i><span>高级查询</span></a>
                        <a class="layui-btn layui-btn-primary form-btn-add"><i class="iconfont icon-xinzeng"></i><span>新增</span></a>
                        <a class="layui-btn layui-btn-primary form-btn-del"><i class="iconfont icon-shanchu"></i><span>删除</span></a>
                        <a class="layui-btn layui-btn-primary form-btn-export"><i class="iconfont icon-daochu"></i><span>导出EXCEL表格</span></a>
                    </div>
                </div>
            </div>
            <!--查询表单-->

            <!--高级查询弹层-->
            <div class="layer-query-more" style="display: none;">
                <div class="layui-form" style="padding-top: 15px;">
                    <div class="layui-form-item">
                        <label class="layui-form-label">党组织</label>
                        <div class="layui-inline">
                            <div class="layui-input-inline">
                                <select name="modules" lay-verify="required" lay-search="">
                                    <option value="">直接选择或搜索选择</option>
                                    <option value="1">党总支</option>
                                    <option value="2">党支部</option>
                                    <option value="3">其他</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">正式党员</label>
                        <div class="layui-inline">
                            <div class="layui-input-inline">
                                <input type="radio" name="" value="是" title="是" checked="">
                                <input type="radio" name="" value="否" title="否">
                            </div>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">入党时间</label>
                        <div class="layui-inline">
                            <div class="layui-input-inline">
                                <input type="text" name="title" lay-verify="title" autocomplete="off" placeholder="请选择时间" class="layui-input" id="start">
                            </div>
                        </div>
                        <div class="layui-inline">
                            <div class="layui-input-inline">
                                <input type="text" name="title" lay-verify="title" autocomplete="off" placeholder="请选择时间" class="layui-input" id="end">
                            </div>
                        </div>
                    </div>
                    <div class="layui-btn-container">
                        <button class="layui-btn">查询</button>
                        <button class="layui-btn layui-btn-primary">重置</button>
                    </div>
                </div>
            </div>
            <!--高级查询弹层-->


            <!--数据表格-->
            <div class="layui-table-panel">
                <div class="layui-form" id="form-list">
                    <table class="layui-table">
                        <colgroup>
                            <col width="20">
                            <col width="150">
                            <col width="100">
                            <col width="100">
                            <col width="150">
                            <col width="150">
                            <col width="200">
                            <col width="150">
                        </colgroup>
                        <thead>
                        <tr>
                            <th style="text-align:center;"><input type="checkbox" lay-skin="primary" lay-filter="allChoose" id="allChoose"></th>
                            <th>姓名</th>
                            <th>性别</th>
                            <th>学历</th>
                            <th>入党时间</th>
                            <th>联系电话</th>
                            <th>资料完成度</th>
                            <th>操作</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td><input type="checkbox" lay-skin="primary"></td>
                            <td>李达康</td>
                            <td>男</td>
                            <td>研究生</td>
                            <td>1982-09-12</td>
                            <td>18186632454</td>
                            <td>
                                <div class="layui-progress layui-progress-big" lay-showpercent="true">
                                    <div class="layui-progress-bar" lay-percent="70%"></div>
                                </div>
                            </td>
                            <td>
                                <div class="layui-btn-group">
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-edit"><i class="iconfont icon-bianji"></i><span>编辑</span></a>
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-view"><i class="iconfont icon-view"></i><span>查看</span></a>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" lay-skin="primary"></td>
                            <td>李达康</td>
                            <td>男</td>
                            <td>研究生</td>
                            <td>1982-09-12</td>
                            <td>18186632454</td>
                            <td>
                                <div class="layui-progress layui-progress-big" lay-showpercent="true">
                                    <div class="layui-progress-bar" lay-percent="70%"></div>
                                </div>
                            </td>
                            <td>
                                <div class="layui-btn-group">
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-edit"><i class="iconfont icon-bianji"></i><span>编辑</span></a>
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-view"><i class="iconfont icon-view"></i><span>查看</span></a>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" lay-skin="primary"></td>
                            <td>李达康</td>
                            <td>男</td>
                            <td>研究生</td>
                            <td>1982-09-12</td>
                            <td>18186632454</td>
                            <td>
                                <div class="layui-progress layui-progress-big" lay-showpercent="true">
                                    <div class="layui-progress-bar" lay-percent="70%"></div>
                                </div>
                            </td>
                            <td>
                                <div class="layui-btn-group">
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-edit"><i class="iconfont icon-bianji"></i><span>编辑</span></a>
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-view"><i class="iconfont icon-view"></i><span>查看</span></a>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" lay-skin="primary"></td>
                            <td>李达康</td>
                            <td>男</td>
                            <td>研究生</td>
                            <td>1982-09-12</td>
                            <td>18186632454</td>
                            <td>
                                <div class="layui-progress layui-progress-big" lay-showpercent="true">
                                    <div class="layui-progress-bar" lay-percent="70%"></div>
                                </div>
                            </td>
                            <td>
                                <div class="layui-btn-group">
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-edit"><i class="iconfont icon-bianji"></i><span>编辑</span></a>
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-view"><i class="iconfont icon-view"></i><span>查看</span></a>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" lay-skin="primary"></td>
                            <td>李达康</td>
                            <td>男</td>
                            <td>研究生</td>
                            <td>1982-09-12</td>
                            <td>18186632454</td>
                            <td>
                                <div class="layui-progress layui-progress-big" lay-showpercent="true">
                                    <div class="layui-progress-bar" lay-percent="70%"></div>
                                </div>
                            </td>
                            <td>
                                <div class="layui-btn-group">
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-edit"><i class="iconfont icon-bianji"></i><span>编辑</span></a>
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-view"><i class="iconfont icon-view"></i><span>查看</span></a>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" lay-skin="primary"></td>
                            <td>李达康</td>
                            <td>男</td>
                            <td>研究生</td>
                            <td>1982-09-12</td>
                            <td>18186632454</td>
                            <td>
                                <div class="layui-progress layui-progress-big" lay-showpercent="true">
                                    <div class="layui-progress-bar" lay-percent="70%"></div>
                                </div>
                            </td>
                            <td>
                                <div class="layui-btn-group">
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-edit"><i class="iconfont icon-bianji"></i><span>编辑</span></a>
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-view"><i class="iconfont icon-view"></i><span>查看</span></a>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" lay-skin="primary"></td>
                            <td>李达康</td>
                            <td>男</td>
                            <td>研究生</td>
                            <td>1982-09-12</td>
                            <td>18186632454</td>
                            <td>
                                <div class="layui-progress layui-progress-big" lay-showpercent="true">
                                    <div class="layui-progress-bar" lay-percent="70%"></div>
                                </div>
                            </td>
                            <td>
                                <div class="layui-btn-group">
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-edit"><i class="iconfont icon-bianji"></i><span>编辑</span></a>
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-view"><i class="iconfont icon-view"></i><span>查看</span></a>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" lay-skin="primary"></td>
                            <td>李达康</td>
                            <td>男</td>
                            <td>研究生</td>
                            <td>1982-09-12</td>
                            <td>18186632454</td>
                            <td>
                                <div class="layui-progress layui-progress-big" lay-showpercent="true">
                                    <div class="layui-progress-bar" lay-percent="70%"></div>
                                </div>
                            </td>
                            <td>
                                <div class="layui-btn-group">
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-edit"><i class="iconfont icon-bianji"></i><span>编辑</span></a>
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-view"><i class="iconfont icon-view"></i><span>查看</span></a>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" lay-skin="primary"></td>
                            <td>李达康</td>
                            <td>男</td>
                            <td>研究生</td>
                            <td>1982-09-12</td>
                            <td>18186632454</td>
                            <td>
                                <div class="layui-progress layui-progress-big" lay-showpercent="true">
                                    <div class="layui-progress-bar" lay-percent="70%"></div>
                                </div>
                            </td>
                            <td>
                                <div class="layui-btn-group">
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-edit"><i class="iconfont icon-bianji"></i><span>编辑</span></a>
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-view"><i class="iconfont icon-view"></i><span>查看</span></a>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" lay-skin="primary"></td>
                            <td>李达康</td>
                            <td>男</td>
                            <td>研究生</td>
                            <td>1982-09-12</td>
                            <td>18186632454</td>
                            <td>
                                <div class="layui-progress layui-progress-big" lay-showpercent="true">
                                    <div class="layui-progress-bar" lay-percent="70%"></div>
                                </div>
                            </td>
                            <td>
                                <div class="layui-btn-group">
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-edit"><i class="iconfont icon-bianji"></i><span>编辑</span></a>
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-view"><i class="iconfont icon-view"></i><span>查看</span></a>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" lay-skin="primary"></td>
                            <td>李达康</td>
                            <td>男</td>
                            <td>研究生</td>
                            <td>1982-09-12</td>
                            <td>18186632454</td>
                            <td>
                                <div class="layui-progress layui-progress-big" lay-showpercent="true">
                                    <div class="layui-progress-bar" lay-percent="70%"></div>
                                </div>
                            </td>
                            <td>
                                <div class="layui-btn-group">
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-edit"><i class="iconfont icon-bianji"></i><span>编辑</span></a>
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-view"><i class="iconfont icon-view"></i><span>查看</span></a>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" lay-skin="primary"></td>
                            <td>李达康</td>
                            <td>男</td>
                            <td>研究生</td>
                            <td>1982-09-12</td>
                            <td>18186632454</td>
                            <td>
                                <div class="layui-progress layui-progress-big" lay-showpercent="true">
                                    <div class="layui-progress-bar" lay-percent="70%"></div>
                                </div>
                            </td>
                            <td>
                                <div class="layui-btn-group">
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-edit"><i class="iconfont icon-bianji"></i><span>编辑</span></a>
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-view"><i class="iconfont icon-view"></i><span>查看</span></a>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" lay-skin="primary"></td>
                            <td>李达康</td>
                            <td>男</td>
                            <td>研究生</td>
                            <td>1982-09-12</td>
                            <td>18186632454</td>
                            <td>
                                <div class="layui-progress layui-progress-big" lay-showpercent="true">
                                    <div class="layui-progress-bar" lay-percent="70%"></div>
                                </div>
                            </td>
                            <td>
                                <div class="layui-btn-group">
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-edit"><i class="iconfont icon-bianji"></i><span>编辑</span></a>
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-view"><i class="iconfont icon-view"></i><span>查看</span></a>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" lay-skin="primary"></td>
                            <td>李达康</td>
                            <td>男</td>
                            <td>研究生</td>
                            <td>1982-09-12</td>
                            <td>18186632454</td>
                            <td>
                                <div class="layui-progress layui-progress-big" lay-showpercent="true">
                                    <div class="layui-progress-bar" lay-percent="70%"></div>
                                </div>
                            </td>
                            <td>
                                <div class="layui-btn-group">
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-edit"><i class="iconfont icon-bianji"></i><span>编辑</span></a>
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-view"><i class="iconfont icon-view"></i><span>查看</span></a>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" lay-skin="primary"></td>
                            <td>李达康</td>
                            <td>男</td>
                            <td>研究生</td>
                            <td>1982-09-12</td>
                            <td>18186632454</td>
                            <td>
                                <div class="layui-progress layui-progress-big" lay-showpercent="true">
                                    <div class="layui-progress-bar" lay-percent="70%"></div>
                                </div>
                            </td>
                            <td>
                                <div class="layui-btn-group">
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-edit"><i class="iconfont icon-bianji"></i><span>编辑</span></a>
                                    <a href="javascript:;" class="layui-btn layui-btn-sm form-btn-view"><i class="iconfont icon-view"></i><span>查看</span></a>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div id="demo7"></div>
            </div>
            <!--数据表格-->
        </div>

    </div>
    <!--右侧内容-->


</div>







<script type="text/javascript" src="../../layui/layui.js"></script>
<script src="../../assets/js/jquery-1.8.3.min.js"></script>
<!--ztree-->
<script src="../../assets/js/jquery.ztree.core.js"></script>
<!--ztree-->
<script type="text/javascript">
    layui.use(['laypage', 'laydate', 'element','form', 'layer'], function(){
        var laypage = layui.laypage;
        var element = layui.element;
        var form = layui.form;
        var laydate = layui.laydate;

        laypage.render({
            elem: 'demo7'
            ,count: 70 //数据总数，从服务端得到
            ,jump: function(obj, first){
                //obj包含了当前分页的所有参数，比如：
                console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
                console.log(obj.limit); //得到每页显示的条数

                //首次不执行
                if(!first){
                    //do something
                }
            }
        });

        // 全选
        form.on('checkbox(allChoose)', function(data){
            var checkAll = data.elem.checked;
            $('#form-list').find('input[type="checkbox"]').each(function () {
                this.checked = checkAll;
                checkAll && ($(this).closest('tr').addClass('active')) || ($(this).closest('tr').removeClass('active'))
            });
            form.render('checkbox');
        });
        $('#form-list tr').on('click', '.layui-form-checkbox', function () {
            var $checkbox = $(this).siblings('input[type="checkbox"]')[0];
            if($checkbox.checked) {
                $(this).closest('tr').addClass('active');
            } else {
                $(this).closest('tr').removeClass('active');
                document.getElementById('allChoose').checked = false;
            }
            form.render('checkbox');
        });
        // 高级查询
        $('.layui-form-panel').on('click', '.form-btn-query-more', function () {
            layer.open({
                type: 1,
                title: '高级查询',
                shadeClose: true,
                shade: 0.8,
                area: ['600px', '300px'],
                content: $('.layer-query-more'),
                scrollbar: false
            });
        })

        //入党时间开始范围
        laydate.render({
            elem: '#start' //指定元素
        });
        //入党时间结束范围
        laydate.render({
            elem: '#end' //指定元素
        });
        // 新增
        $('.layui-form-panel').on('click', '.form-btn-add', function () {
            layer.open({
                type: 2,
                title: '党员信息表',
                shadeClose: true,
                shade: 0.8,
                area: ['80%', '90%'],
                content: 'form_add.html', //iframe的url
                scrollbar: false
            });
        })
        // 编辑
        $('#form-list tr').on('click', '.form-btn-edit', function () {
            layer.open({
                type: 2,
                title: '党员信息表',
                shadeClose: true,
                shade: 0.8,
                area: ['80%', '90%'],
                content: 'form_edit.html', //iframe的url
                scrollbar: false
            });
        })
        // 查看
        $('#form-list tr').on('click', '.form-btn-view', function () {
            layer.open({
                type: 2,
                title: '党员信息表',
                shadeClose: true,
                shade: 0.8,
                area: ['80%', '90%'],
                content: 'form_view.html', //iframe的url
                scrollbar: false
            });
        })

    });

    $(function () {
        var setting = {
            view: {
                dblClickExpand: false,
                showLine: false
            },
            data: {
                simpleData: {
                    enable: true
                }
            },
            callback: {
                onClick: onClick
            }
        };

        var zNodes =[
            { id:1, pId:0, name:"中共南昌西湖区党组织", open:true},
            { id:11, pId:1, name:"中共南昌西湖区委", open:true},
            { id:111, pId:11, name:"中共南昌 1-1-中共南昌 1-1-1"},
            { id:112, pId:11, name:"中共南昌 1-1-2"},
            { id:113, pId:11, name:"中共南昌 1-1-3"},
            { id:114, pId:11, name:"中共南昌 1-1-4"},
            { id:12, pId:1, name:"中共南昌西湖区委 1-2", open:true},
            { id:121, pId:12, name:"中共南昌 1-2-1"},
            { id:122, pId:12, name:"中共南昌 1-2-2"},
            { id:123, pId:12, name:"中共南昌 1-2-3"},
            { id:124, pId:12, name:"中共南昌 1-2-4"},
            { id:13, pId:1, name:"中共南昌西湖区委 1-3", open:true},
            { id:131, pId:13, name:"中共南昌 1-3-1"},
            { id:132, pId:13, name:"中共南昌 1-3-2"},
            { id:133, pId:13, name:"中共南昌 1-3-3"},
            { id:134, pId:13, name:"中共南昌 1-3-4"}
        ];

        function onClick(e,treeId, treeNode) {
            var zTree = $.fn.zTree.getZTreeObj("treeDemo");
            zTree.expandNode(treeNode);
        }

        $(document).ready(function(){
            $.fn.zTree.init($("#treeDemo"), setting, zNodes);
        });

    })


</script>
</body>
</html>
