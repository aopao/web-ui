<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>web-ui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="../../layui/css/layui.css">
    <link rel="stylesheet" href="../../assets/plugins/iconfont/iconfont.css">
    <link rel="stylesheet" href="../../assets/plugins/ztree/zTreeStyle.css">
    <link rel="stylesheet" href="../../assets/css/index.css">
    <link rel="stylesheet" href="../../assets/css/main.css">
</head>
<body>

<div class="layui-layout">
    <!--左侧树-->
    <div class="layui-tree-panel">
        <div class="layui-tree-search">
            <input type="text" class="layui-input" id="layui-input-tree" placeholder="请输入关键字">
        </div>
        <div id="treeDemo" class="layui-ztree ztree"></div>
    </div>
    <!--左侧树-->
    <!--分割线-->
    <div class="layui-tree-divider"></div>
    <!--右侧内容-->
    <div class="layui-content-panel">
        <!--路径导航-->
        <div class="layui-breadcrumb-panel">
            <span class="layui-breadcrumb">
              <a href="#">首页</a>
              <a href="javascript:;"><cite>模板</cite></a>
              <a href="javascript:;"><cite>关系转接</cite></a>
            </span>
        </div>
        <!--路径导航-->

        <div class="layui-relationship-container">
            <div class="layui-relationship">
                <div class="layui-row">
                    <div class="layui-col-md4">
                        <div class="layui-relationship-btn layui-relationship-inner">
                            <a href="javascript:;"><i class="iconfont icon-zhuanhuan"></i><span>区内转接</span></a>
                        </div>
                    </div>
                    <div class="layui-col-md4">
                        <div class="layui-relationship-btn layui-relationship-go">
                            <a href="javascript:;"><i class="iconfont icon-zhuanchu"></i><span>转出区外</span></a>
                        </div>
                    </div>
                    <div class="layui-col-md4">
                        <div class="layui-relationship-btn layui-relationship-come">
                            <a href="javascript:;"><i class="iconfont icon-zhuanru"></i><span>区外转入</span></a>
                        </div>
                    </div>
                </div>
                <div class="layui-row">
                    <div class="layui-col-md12">
                        <div class="layui-relationship-tips">
                            <b>温馨提示：</b>
                            1.请选择您要办理的组织关系转接类型。 <br>
                            2.区内转接您可以输入接转党员身份证号码自动生成介绍信和党员信息。<br>
                            3.区外转接请务必填写正确的党员信息。
                        </div>
                    </div>
                </div>

            </div>

        </div>

    </div>
    <!--右侧内容-->


</div>







<script type="text/javascript" src="../../layui/layui.js"></script>
<script src="../../assets/js/jquery-1.8.3.min.js"></script>
<!--ztree-->
<script type="text/javascript" src="../../assets/plugins/ztree/dataset.js"></script>
<script type="text/javascript" src="../../assets/plugins/ztree/jquery.ztree.all.min.js"></script>
<script type="text/javascript" src="../../assets/plugins/ztree/jquery.ztree.exhide.min.js"></script>
<script type="text/javascript" src="../../assets/plugins/ztree/fuzzysearch.js"></script>
<!--ztree-->
<script type="text/javascript">
    layui.use(['element','form', 'layer'], function() {
        var element = layui.element
            ,layer = layui.layer;

        //ztree配置
        var setting = {
            check: {
                enable: true//checkbox
            },
            view: {
                nameIsHTML: true, //允许name支持html
                selectedMulti: false
            },
            edit: {
                enable: false,
                editNameSelectAll: false
            },
            data: {
                simpleData: {
                    enable: true
                }
            },
            callback: {
                // beforeExpand: beforeExpand,
                // onExpand: onExpand,
                onClick: zTreeOnClick
            }
        };

        $(function () {
            //从服务器读取数据并初始化树形图
            //loadDataFromServer(urlStr);
            //本例直接从模拟数据dataset.js读取
            loadDataFromLocal();//从本地dataset.js文件读取模拟数据并初始化树形图
        })

        /**
         * 通过ajax方法从服务器获取数据并初始化树形图
         */
        function loadDataFromServer(urlStr){
            $.ajax({
                type: "get",
                dataType: "json",
                url: urlStr,  //服务请求地址
                success: function(data) {
                    initThisZtree(data);//传入数据,初始化ztree
                    fuzzySearch('treeDemo','#layui-input-tree',null,true); //初始化模糊搜索方法
                }
            });
        }

        /**
         * 从本地js/dataset.js文件读取模拟数据并初始化树形图
         */
        function loadDataFromLocal(){
            //此处的树节点数据mockData是在本地js/dataSet.js中预先定义的模拟数据
            initThisZtree(mockData);//传入数据,初始化ztree
            // zTreeId ztree对象的id,不需要#
            // searchField 输入框选择器
            // isHighLight 是否高亮,默认高亮,传入false禁用
            // isExpand 是否展开,默认合拢,传入true展开
            fuzzySearch('treeDemo','#layui-input-tree',null,true); //初始化模糊搜索方法
        }

        /**
         * 初始化ztree
         *
         * @param {Object} data
         */
        function initThisZtree(data){
            //初始化ztree三个参数分别是(jQuery对象,ztree设置,树节点数据)
            var treeObj = $.fn.zTree.init($("#treeDemo"), setting, data);
            treeObj.expandAll(true);
        }

        /**
         * @param event
         * @param treeId
         * @param treeNode
         */
        function zTreeOnClick(event, treeId, treeNode) {
            //这里定义点击书中节点时，相应的页面其他的操作，示例：
            // 每次点击节点后， 弹出该节点的 tId、name 的信息
            layer.msg(treeNode.tId + ", " + treeNode.name);
        };


        // 树折叠
        $('.layui-tree-divider').on('click', function () {
            if($(this).hasClass('layui-panel-hide')) {
                $(this).removeClass('layui-panel-hide');
                $(this).siblings('.layui-tree-panel').removeClass('layui-panel-hide');
                $(this).siblings('.layui-content-panel').removeClass('layui-panel-hide');
            } else {
                $(this).addClass('layui-panel-hide');
                $(this).siblings('.layui-tree-panel').addClass('layui-panel-hide');
                $(this).siblings('.layui-content-panel').addClass('layui-panel-hide');
            }
        });


    });

</script>
</body>
</html>
